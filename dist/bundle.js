(()=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(e,i){for(var n=0;n<i.length;n++){var r=i[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,i){if("object"!==t(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==t(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===t(o)?o:String(o)),r)}var o}var i=function(){function t(){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),t.instance)return t.instance;t.instance=this}var i,n;return i=t,(n=[{key:"isLeftClick",value:function(t){return 0===t.button&&t.buttons<=1}},{key:"isScreenTouch",value:function(t){return t.changedTouches.length>=1}}])&&e(i.prototype,n),Object.defineProperty(i,"prototype",{writable:!1}),t}();function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function r(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==n(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,"string");if("object"!==n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===n(o)?o:String(o)),r)}var o}var o=function(){function t(e,n){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),t.instance)return t.instance;null==e&&console.log("Please provide the global context."),this.contextManager=e,this.canvasPainter=n,this.clickUtil=new i,this.init(),t.instance=this}var e,n;return e=t,n=[{key:"bindMethods",value:function(){this.mouseDownHandler=this.mouseDownHandler.bind(this),this.mouseDragHandler=this.mouseDragHandler.bind(this),this.mouseUpHandler=this.mouseUpHandler.bind(this),this.clearMouseState=this.clearMouseState.bind(this),this.resizeHandler=this.resizeHandler.bind(this),this.touchStartHandler=this.touchStartHandler.bind(this),this.touchDragHandler=this.touchDragHandler.bind(this),this.touchEndHandler=this.touchEndHandler.bind(this),this.touchClearMouseState=this.touchClearMouseState.bind(this),this.resizeHandler=this.resizeHandler.bind(this)}},{key:"initializeDOMListeners",value:function(){var t=this.canvasPainter.canvas;t.addEventListener("mousedown",this.mouseDownHandler),document.addEventListener("mousemove",this.mouseDragHandler),t.addEventListener("mouseup",this.mouseUpHandler),document.addEventListener("mouseup",this.clearMouseState),window.addEventListener("resize",this.resizeHandler),t.addEventListener("touchstart",this.touchStartHandler),t.addEventListener("touchmove",this.touchDragHandler),t.addEventListener("touchend",this.touchEndHandler),window.addEventListener("orientationchange",this.resizeHandler)}},{key:"init",value:function(){this.bindMethods(),this.initializeDOMListeners()}},{key:"mouseDownHandler",value:function(t){this.contextManager.isDrawing=!0,this.canvasPainter.startPath(t.x,t.y)}},{key:"mouseUpHandler",value:function(t){var e=this.contextManager,i=e.isDrawing,n=e.isDragging,r=this.clickUtil.isLeftClick;i&&!n&&r(t)&&this.canvasPainter.drawPoint(t.x,t.y)}},{key:"mouseDragHandler",value:function(t){var e=this.contextManager.isDrawing,i=this.clickUtil.isLeftClick;e&&i(t)&&(this.contextManager.isDragging=!0,this.canvasPainter.drawLineTo(t.x,t.y))}},{key:"resizeHandler",value:function(t){setTimeout(this.contextManager.updateScalingFactors,400)}},{key:"touchStartHandler",value:function(t){t.preventDefault();var e=this.clickUtil.isScreenTouch;if(!this.contextManager.isDrawing&&e(t)){this.contextManager.isDrawing=!0;var i=t.targetTouches[0],n=i.clientX,r=i.clientY;this.canvasPainter.startPath(n,r)}}},{key:"touchDragHandler",value:function(t){t.preventDefault();var e=this.clickUtil.isScreenTouch;if(this.contextManager.isDrawing&&e(t)){this.contextManager.isDragging=!0;var i=t.targetTouches[0],n=i.clientX,r=i.clientY;this.canvasPainter.drawLineTo(n,r)}}},{key:"touchEndHandler",value:function(t){if(t.preventDefault(),this.contextManager.isDrawing&&!this.contextManager.isDragging){var e=t.changedTouches[0],i=e.clientX,n=e.clientY;this.canvasPainter.drawPoint(i,n)}this.touchClearMouseState(t)}},{key:"touchClearMouseState",value:function(t){t.targetTouches.length>0||this.clearMouseState()}},{key:"clearMouseState",value:function(){this.contextManager.clearMouseState()}}],n&&r(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function s(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,r=function(t,e){if("object"!==a(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,"string");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===a(r)?r:String(r)),n)}var r}var l=function(){function t(e){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),null!=t.instance)return t.instance;null==e&&console.log("Please provide the global context."),this.contextManager=e,this.init(),t.instance=this}var e,i;return e=t,(i=[{key:"bindMethods",value:function(){this.handleEraserSelection=this.handleEraserSelection.bind(this),this.handleBrushSelection=this.handleBrushSelection.bind(this)}},{key:"initializeDOMReferences",value:function(){this.tools=document.getElementsByClassName("tool"),this.eraserTool=document.getElementById("eraser"),this.brushTool=document.getElementById("brush")}},{key:"initializeDOMListeners",value:function(){this.eraserTool.addEventListener("click",this.handleEraserSelection),this.eraserTool.addEventListener("touchstart",this.handleEraserSelection),this.brushTool.addEventListener("click",this.handleBrushSelection),this.brushTool.addEventListener("touchstart",this.handleBrushSelection)}},{key:"initializeDOMState",value:function(){this.brushTool.classList.add("selected")}},{key:"init",value:function(){this.bindMethods(),this.initializeDOMReferences(),this.initializeDOMListeners(),this.initializeDOMState()}},{key:"clearSelectedTools",value:function(){for(var t=0;t<this.tools.length;t++)this.tools[t].classList.remove("selected")}},{key:"handleEraserSelection",value:function(t){t.preventDefault(),this.contextManager.clearMouseState(),this.clearSelectedTools(),this.contextManager.selectedTool="eraser",this.eraserTool.classList.add("selected")}},{key:"handleBrushSelection",value:function(t){t.preventDefault(),this.contextManager.clearMouseState(),this.clearSelectedTools(),this.contextManager.selectedTool="brush",this.brushTool.classList.add("selected")}}])&&s(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();function u(t){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(t)}function c(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,r=function(t,e){if("object"!==u(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,"string");if("object"!==u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===u(r)?r:String(r)),n)}var r}var h=function(){function t(e){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),null!=t.instance)return t.instance;null==e&&console.log("Please provide the global context."),this.contextManager=e,this.init(),t.instance=this}var e,i;return e=t,(i=[{key:"bindMethods",value:function(){this.handleHueSliderChange=this.handleHueSliderChange.bind(this),this.handleMobileHueSliderChange=this.handleMobileHueSliderChange.bind(this),this.handleSaturationSliderChange=this.handleSaturationSliderChange.bind(this),this.handleLuminositySliderChange=this.handleLuminositySliderChange.bind(this),this.renderColor=this.renderColor.bind(this)}},{key:"initializeDOMReferences",value:function(){this.colorResult=document.getElementById("color-result"),this.mobileColorResult=document.getElementById("mobile-color-result"),this.hueRangeSlider=document.getElementById("hue-range-slider"),this.mobileHueRangeSlider=document.getElementById("mobile-hue-range-slider"),this.saturationRangeSlider=document.getElementById("saturation-range-slider"),this.luminosityRangeSlider=document.getElementById("luminosity-range-slider"),this.saturationGradient=document.getElementById("saturation-gradient"),this.luminosityGradient=document.getElementById("luminosity-gradient")}},{key:"initializeDOMListeners",value:function(){this.hueRangeSlider.oninput=this.handleHueSliderChange,this.mobileHueRangeSlider.oninput=this.handleMobileHueSliderChange,this.saturationRangeSlider.oninput=this.handleSaturationSliderChange,this.luminosityRangeSlider.oninput=this.handleLuminositySliderChange}},{key:"initializeDOMState",value:function(){this.hueRangeSlider.defaultValue=0,this.mobileHueRangeSlider.defaultValue=0,this.saturationRangeSlider.defaultValue=80,this.luminosityRangeSlider.defaultValue=60,this.hue=this.hueRangeSlider.value||0,this.saturation=this.saturationRangeSlider.value||80,this.luminosity=this.luminosityRangeSlider.value||60}},{key:"init",value:function(){this.bindMethods(),this.initializeDOMReferences(),this.initializeDOMListeners(),this.initializeDOMState()}},{key:"handleMobileHueSliderChange",value:function(t){this.hue=t.target.value,this.hueRangeSlider.value=this.hue,this.renderColor()}},{key:"handleHueSliderChange",value:function(t){this.hue=t.target.value,this.mobileHueRangeSlider.value=this.hue,this.renderColor()}},{key:"handleSaturationSliderChange",value:function(t){this.saturation=t.target.value,this.renderColor()}},{key:"handleLuminositySliderChange",value:function(t){this.luminosity=t.target.value,this.renderColor()}},{key:"generateSaturationGradient",value:function(t){for(var e="linear-gradient(to right, ",i=0;i<100;i+=10)e+="hsl(".concat(t,", ").concat(i,"%, 60%),");return e+"hsl(".concat(t,", 100%, 60%)")}},{key:"generateLuminosityGradient",value:function(t,e){for(var i="linear-gradient(to right, ",n=0;n<100;n+=10)i+="hsl(".concat(t,", ").concat(e,"%, ").concat(n,"%),");return i+"hsl(".concat(t,", ").concat(e,"%, 100%)")}},{key:"renderColor",value:function(){var t=this.hue,e=this.saturation,i=this.luminosity,n="hsl(".concat(t,", ").concat(e,"%, ").concat(i,"%)");this.colorResult.style.background=n,this.mobileColorResult.style.background=n,this.contextManager.brushColor=n,this.saturationGradient.style.background=this.generateSaturationGradient(t),this.luminosityGradient.style.background=this.generateLuminosityGradient(t,e)}}])&&c(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();function d(t){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d(t)}function f(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,r=function(t,e){if("object"!==d(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,"string");if("object"!==d(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===d(r)?r:String(r)),n)}var r}var y=function(){function t(e){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),null!=t.instance)return t.instance;this.contextManager=e,this.init(),t.instance=this}var e,i;return e=t,(i=[{key:"bindMethods",value:function(){this.toggleSideBarHandler=this.toggleSideBarHandler.bind(this)}},{key:"initializeDOMReferences",value:function(){this.toggleButton=document.getElementById("hamburger-icon-container"),this.closeSidebar=document.getElementById("close-arrow-container"),this.sidebarAnchor=document.getElementById("sidebar-anchor"),this.sidebarContainer=document.getElementById("sidebar-container")}},{key:"initializeDOMListeners",value:function(){this.toggleButton.addEventListener("click",this.toggleSideBarHandler),this.toggleButton.addEventListener("touchstart",this.toggleSideBarHandler),this.closeSidebar.addEventListener("click",this.toggleSideBarHandler),this.closeSidebar.addEventListener("touchstart",this.toggleSideBarHandler)}},{key:"init",value:function(){this.bindMethods(),this.initializeDOMReferences(),this.initializeDOMListeners()}},{key:"toggleSideBarHandler",value:function(t){var e=this;t.preventDefault();var i,n=!1;window.innerWidth<800?(this.sidebarContainer.classList.remove("minified"),this.sidebarContainer.classList.toggle("expanded"),this.sidebarContainer.classList.contains("expanded")||(n=!0)):(this.sidebarContainer.classList.remove("expanded"),this.sidebarContainer.classList.toggle("minified"),this.sidebarContainer.classList.contains("minified")&&(n=!0)),n?i=setTimeout((function(){return e.sidebarContainer.scrollTop=0}),300):null!=i&&clearTimeout(i),setTimeout(this.contextManager.updateScalingFactors,400)}}])&&f(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();function v(t){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},v(t)}function g(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,r=function(t,e){if("object"!==v(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,"string");if("object"!==v(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===v(r)?r:String(r)),n)}var r}var b=function(){function t(e){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),null!=t.instance)return t.instance;null==e&&console.log("Please provide the global context."),this.contextManager=e,this.init(),t.instance=this}var e,i;return e=t,(i=[{key:"bindMethods",value:function(){this.handleBrushSizeChange=this.handleBrushSizeChange.bind(this)}},{key:"initializeDOMReferences",value:function(){this.brushSizeField=document.getElementById("brushSizeField")}},{key:"initializeDOMState",value:function(){var t=Number(this.brushSizeField.value)||20;this.contextManager.brushSize=t,this.brushSizeField.defaultValue=t,this.brushSizeField.oninput=this.handleBrushSizeChange}},{key:"init",value:function(){this.bindMethods(),this.initializeDOMReferences(),this.initializeDOMState()}},{key:"handleBrushSizeChange",value:function(t){var e=Number(t.target.value);this.contextManager.brushSize=e}}])&&g(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();function m(t){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m(t)}function S(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,r=function(t,e){if("object"!==m(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,"string");if("object"!==m(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===m(r)?r:String(r)),n)}var r}var p=function(){function t(e,i){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),t.instance)return t.instance;null==e&&console.log("Please provide the global context."),this.ctx=e,this._canvas=i,this.canvasContext=i.getContext("2d"),this.init(),t.instance=this}var e,i;return e=t,(i=[{key:"init",value:function(){this.bindMathods()}},{key:"bindMathods",value:function(){this.startPath=this.startPath.bind(this),this.drawPoint=this.drawPoint.bind(this),this.drawLineTo=this.drawLineTo.bind(this),this.normalizeCoordinates=this.normalizeCoordinates.bind(this)}},{key:"startPath",value:function(t,e){var i=this.normalizeCoordinates(t,e),n=i.canvasX,r=i.canvasY;this.canvasContext.beginPath(),this.canvasContext.moveTo(n,r)}},{key:"drawPoint",value:function(t,e){var i=this.ctx.displayBrushSize,n=this.normalizeCoordinates(t,e),r=n.canvasX,o=n.canvasY;this.canvasContext.arc(r,o,i/2,0,2*Math.PI),this.canvasContext.fill()}},{key:"drawLineTo",value:function(t,e){var i=this.normalizeCoordinates(t,e),n=i.canvasX,r=i.canvasY;this.canvasContext.lineTo(n,r),this.canvasContext.stroke()}},{key:"normalizeCoordinates",value:function(t,e){return{canvasX:t=this.ctx.XScaleFactor*(t-this.canvas.offsetLeft),canvasY:e=this.ctx.YScaleFactor*(e-this.canvas.offsetTop)}}},{key:"canvas",get:function(){return this._canvas}}])&&S(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();function w(t){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},w(t)}function k(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,r=function(t,e){if("object"!==w(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,"string");if("object"!==w(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===w(r)?r:String(r)),n)}var r}var C=function(){function t(e,i){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),t.instance)return t.instance;null==e&&console.log("Please provide the global context."),this.ctx=e,this.canvas=i,this.canvasContext=i.getContext("2d"),this.init(),t.instance=this}var e,i;return e=t,(i=[{key:"init",value:function(){this.bindMethods()}},{key:"bindMethods",value:function(){this.updateScalingFactors=this.updateScalingFactors.bind(this),this.clearMouseState=this.clearMouseState.bind(this)}},{key:"refreshActiveColor",value:function(){this.canvasContext.fillStyle=this.activeColor,this.canvasContext.strokeStyle=this.activeColor}},{key:"refreshBrushSize",value:function(){this.canvasContext.lineWidth=this.ctx.displayBrushSize}},{key:"updateScalingFactors",value:function(){var t=this.canvas.getBoundingClientRect();this.ctx.XScaleFactor=this.canvas.width/t.width,this.ctx.YScaleFactor=this.canvas.height/t.height}},{key:"clearMouseState",value:function(){this.ctx.isDrawing=!1,this.ctx.isDragging=!1}},{key:"XScaleFactor",get:function(){return this.ctx.XScaleFactor}},{key:"YScaleFactor",get:function(){return this.ctx.YScaleFactor}},{key:"isDrawing",get:function(){return this.ctx.isDrawing},set:function(t){this.ctx.isDrawing=t}},{key:"isDragging",get:function(){return this.ctx.isDragging},set:function(t){this.ctx.isDragging=t}},{key:"canvasBackgroundColor",get:function(){return this.ctx.canvasBackgroundColor},set:function(t){this.ctx.canvasBackgroundColor=t,this.refreshActiveColor()}},{key:"activeColor",get:function(){return"eraser"===this.ctx.selectedTool?this.ctx.canvasBackgroundColor:this.ctx.brushColor}},{key:"brushColor",get:function(){return this.ctx.brushColor},set:function(t){this.ctx.brushColor=t,this.refreshActiveColor()}},{key:"selectedTool",get:function(){return this.ctx.selectedTool},set:function(t){this.ctx.selectedTool=t,this.refreshActiveColor()}},{key:"brushSize",get:function(){return this.ctx.brushSize},set:function(t){this.ctx.brushSize=t,this.refreshBrushSize()}},{key:"canvasSize",get:function(){return this.canvas.getBoundingClientRect()}}])&&k(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),t}(),x=document.getElementById("myCanvas"),M=x.getContext("2d"),D={isDrawing:!1,isDragging:!1,canvasBackgroundColor:"#f8f8f8",brushColor:"#000000",selectedTool:"brush",brushSize:20,XScaleFactor:1,YScaleFactor:1,get displayBrushSize(){return this.brushSize*(window.devicePixelRatio||1)}},P=new C(D,x),z=(new o(P,new p(D,x)),new h(P));new l(P),new y(P),new b(P),x.width=window.screen.width*window.devicePixelRatio,x.height=window.screen.height*window.devicePixelRatio,P.updateScalingFactors(),x.style.background=D.canvasBackgroundColor,M.lineWidth=D.displayBrushSize,M.lineJoin="round",M.lineCap="round",z.renderColor()})();